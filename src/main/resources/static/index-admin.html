<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Head -->
<head>
    <meta charset="utf-8"/>
    <title>工大共享管理平台</title>

    <meta name="description" content="data tables"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

    <!--Basic Styles-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link id="bootstrap-rtl-link" href="" rel="stylesheet"/>
    <link href="assets/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="assets/css/weather-icons.min.css" rel="stylesheet"/>

    <!--Fonts-->
    <!-- <link href="http://fonts.useso.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300" rel="stylesheet" type="text/css"> -->

    <!--Beyond styles-->
    <link id="beyond-link" href="assets/css/beyond.min.css" rel="stylesheet"/>
    <link href="assets/css/demo.min.css" rel="stylesheet"/>
    <link href="assets/css/typicons.min.css" rel="stylesheet"/>
    <link href="assets/css/animate.min.css" rel="stylesheet"/>
    <link id="skin-link" href="" rel="stylesheet" type="text/css"/>

    <!--Page Related styles-->
    <link href="assets/css/dataTables.bootstrap.css" rel="stylesheet"/>

    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="assets/js/skins.min.js"></script>
</head>
<!-- /Head -->
<!-- Body -->
<body>

<!--详细信息-->
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="hidden">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body" id="content">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" onclick="closeModal();">关闭
                </button>
                <button type="button" class="btn btn-primary">
                    确定
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!--/详细信息-->
<!-- Loading Container -->
<div class="loading-container">
    <div class="loading-progress">
        <div class="rotator">
            <div class="rotator">
                <div class="rotator colored">
                    <div class="rotator">
                        <div class="rotator colored">
                            <div class="rotator colored"></div>
                            <div class="rotator"></div>
                        </div>
                        <div class="rotator colored"></div>
                    </div>
                    <div class="rotator"></div>
                </div>
                <div class="rotator"></div>
            </div>
            <div class="rotator"></div>
        </div>
        <div class="rotator"></div>
    </div>
</div>
<!--  /Loading Container -->
<!-- Navbar -->
<div class="navbar" style="height:0px">
    <div class="navbar-inner" id="admin">
        <div class="navbar-header" style="margin-left:10px;color:#fff;">
            <span class="profile"><h4>综合信息</h4></span>
        </div>
        <!-- <div class="navbar-header pull-right" style="margin-right:10px;color:#fff;">
        <span class="profile"><h4>退出</h4></span>
        </div>
        <div class="navbar-header pull-right" style="color:#fff;">
        <span class="profile"><h4>【admin】</h4></span>
        </div>
        <div class="navbar-header pull-right" style="color:#fff;">
        <span class="profile"><h4>管理员</h4></span>
        </div> -->
    </div>
</div>
<!-- /Navbar -->
<!-- Main Container -->
<div class="main-container container-fluid">
    <!-- Page Container -->
    <div class="page-container">


        <!-- 学生-->
        <div class="row">
            <div class="col-xs-12 col-md-12">
                <div class="widget">
                    <div class="widget-header ">
                        <span class="widget-caption"><a href="./admin/studentList.html" class="btn btn-info">学生列表</a></span>
                        <div class="widget-buttons">
                            <a href="#" data-toggle="maximize">
                                <i class="fa fa-expand"></i>
                            </a>
                            <a href="#" data-toggle="collapse">
                                <i class="fa fa-minus"></i>
                            </a>
                            <a href="#" data-toggle="dispose">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>

                    <div class="widget-body">
                        <div class="table-toolbar">

                        </div>
                        <table class="table table-striped table-hover table-bordered" id="studentList">
                            <thead>
                            <tr role="row">
                                <!--  <th>id</th> -->
                                <th>
                                    姓名
                                </th>
                                <th>
                                    学号
                                </th>
                                <th>
                                    学院
                                </th>
                                <th>
                                </th>
                            </tr>
                            </thead>

                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- 学生-->

    </div>

    <!-- 老师-->
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div class="widget">
                <div class="widget-header ">
                    <span class="widget-caption"><a href="./admin/teacherList.html" class="btn btn-info">教工列表</a></span>
                    <div class="widget-buttons">
                        <a href="#" data-toggle="maximize">
                            <i class="fa fa-expand"></i>
                        </a>
                        <a href="#" data-toggle="collapse">
                            <i class="fa fa-minus"></i>
                        </a>
                        <a href="#" data-toggle="dispose">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="table-toolbar">

                    </div>
                    <table class="table table-striped table-hover table-bordered" id="teacherList">
                        <thead>
                        <tr role="row">
                            <!--  <th>id</th> -->
                            <th>
                                姓名
                            </th>
                            <th>
                                工号
                            </th>
                            <th>
                                学院
                            </th>
                            <th>
                            </th>
                        </tr>
                        </thead>

                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- 教工列表-->

</div>


<!--Basic Scripts-->
<script src="assets/js/jquery-2.0.3.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="./layui/jquery.cookie.js" charset="utf-8"></script>

<!--Beyond Scripts-->
<script src="assets/js/beyond.min.js"></script>

<!--Page Related Scripts-->
<script src="assets/js/datatable/jquery.dataTables.min.js"></script>
<script src="assets/js/datatable/ZeroClipboard.js"></script>
<script src="assets/js/datatable/dataTables.tableTools.min.js"></script>
<script src="assets/js/datatable/dataTables.bootstrap.min.js"></script>
<script src="assets/js/datatable/datatables-index.js"></script>
<script>

    urlLoad = "/wanna605/toSelectUser";
    urlUpdate = "/wanna605/toAdminUpdate";
    deleteUserUrl = "/wanna605/toDeleteUser";
    deleteSearchHistoryUrl = "/toDeleteSearchHistory";
    var urlStudent = '/admin/getStudentList';
    var urlTeacher = '/admin/getTeacherList';
    var addData;
    $.ajax({
        url: urlStudent,
        type: "GET",
        headers: {
            Authorization:$.cookie("Authorization")
        },
        dataType: "json",
        contentType: "application/json;charset=UTF-8",
        success: function (result) {
            var results = result.rows;
            for (var i = 0; i < results.length; i++) {
                //生成表格
                addData = "<tr><td>" + results[i].name +
                    "</td><td >" + results[i].snumber +
                    "</td><td>"+results[i].department
//                    + "</td><td><a href='#' style='margin-left:5px;' class='btn btn-info btn-xs edit'><i class='fa fa-edit'></i> 详情</a></td></tr>";
                $("#studentList").children("tbody").append(addData);

            }//对列表的生成初始化
            InitiateSimpleDataTable.init();
            InitiateEditableDataTable.init();
            InitiateExpandableDataTable.init();
            InitiateSearchableDataTable.init();
            //隐藏不能使用的控件
            $("#editabledatatable_new").hide();
            $(".DTTT.btn-group").hide();
        }
    });
    $.ajax({
        url: urlTeacher,
        type: "GET",
        headers: {
            Authorization:$.cookie("Authorization")
        },
        dataType: "json",
        contentType: "application/json;charset=UTF-8",
        success: function (result) {
            var results = result.rows;
            for (var i = 0; i < results.length; i++) {
                //生成表格
                addData = "<tr><td>" + results[i].name +
                    "</td><td >" + results[i].tnumber +
                    "</td><td>"+results[i].department
//                    + "</td><td><a href='#' style='margin-left:5px;' class='btn btn-info btn-xs edit'><i class='fa fa-edit'></i> 详情</a></td></tr>";
                $("#teacherList").children("tbody").append(addData);

            }//对列表的生成初始化
            InitiateSimpleDataTable.init();
            InitiateEditableDataTable.init();
            InitiateExpandableDataTable.init();
            InitiateSearchableDataTable.init();
            //隐藏不能使用的控件
            $("#editabledatatable_new").hide();
            $(".DTTT.btn-group").hide();
        }
    });

    //更新数据
    function updateData() {
        nodes = $('.save').parent().siblings();
        console.log("d" + nodes.length);
        //nodes[2].firstChild.type = "password";
        userId = nodes[0].firstChild.value;
        userName = nodes[1].firstChild.value;
        userPassword = nodes[2].firstChild.value;
        if (nodes[3].firstChild.value == "已交") {
            userActived = "1";
        } else if (nodes[3].firstChild.value == "未交") {
            userActived = "0";
        } else if (nodes[3].firstChild.value == "待退") {
            userActived = "2";
        } else {
            userActived = "3";
        }
        if (userName != "" && userPassword != "") {
            if (userPassword == "******") {
                userPassword = "";
            }//JSON.stringify
            $.ajax({
                url: urlUpdate,
                type: "POST",
                dataType: "text",
                data: "userId=" + userId + "&userName=" + userName + "&userPassword=" + userPassword + "&userActived=" + userActived,
                contentType: "application/x-www-form-urlencoded;charset=utf-8",
                success: function (result) {
                    //location.reload;
                    alert("操作成功");
                    location.reload();
                }
            });
        } else {
            alert("信息不能为空！");
            location.reload();
        }
        //e.parent().siblings()[2].firstChild.type = "password";
    }

    /*$(".edit").on('click',function(){
        nodes = $('.save').parent().siblings();
        console.log("d"+nodes.length);
        for(var i = 0;i<nodes.length;i++){
            console.log($('.save').parent().siblings()[i].firstChild.value);
        }
    });*/
    function deleteSearchHistory(e) {
        $.ajax({
            url: deleteSearchHistoryUrl,
            type: "POST",
            dataType: "text",
            data: "userID=" + e,
            contentType: "application/x-www-form-urlencoded;charset=utf-8",
            success: function (result) {
                //location.reload;
            }
        });
        alert("已重置");
    }

    $('#admin').on('click', function () {
        window.location.href = "login.html";
    });
</script>

</body>
<!--  /Body -->
</html>
